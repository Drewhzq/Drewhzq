SELECT
	aast.ASL_ID "aslId",
	aast.USING_ORGANIZATION_ID "usingOrganizationId",
	aast.OWNING_ORGANIZATION_ID "owningOrganizationId",
	aast.SUPPLIER_BUSINESS_TYPE "supplierBusinessType",
	aast.ASL_STATUS_ID "aslStatusId",
	aast.ASL_STATUS "aslStatus",
	aast.MANUFACTURER "manufacturer",
	aast.SUPPLIER_CODE "supplierCode",
	aast.ITEM_NUMBER "itemNumber",
	aast.OU_NAME "ouName",
	aast.SUPPLIER_SITE_ID "supplierSiteId",
	aast.SUPPLIER_SITE_CODE "supplierSiteCode",
	aast.PRIMARY_SUPPLIER_ITEM "primarySupplierItem",
	aast.REMARKS "remarks",
	aast.PART_NUMBER "partNumber",
	aast.IS_INSPEC_WAIVED_ITEM "isInspecWaivedItem",
	aast.INSPECTION_MODEL "inspectionModel",
	aast.MAX_PO_AMOUNT "maxPoAmount",
	aast.DISABLE_FLAG "disableFlag",
	aast.CREATION_DATE "aslCreationDate",
	aast.LAST_UPDATE_DATE "aslLastUpdateDate",
	aast.UNIT_CODE "unitCode",
	aat.ASL_ATTRIBUTE_ID "aslAttributeId",
	aat.LEAD_TIME "leadTime",
	aat.MIN_ORDER_QUANTITY "minOrderQuantity",
	aat.FIXED_LOT_MULTIPLE "fixedLotMultiple",
	aat.CANCEL_WINDOW "cancelWindow",
	aat.DELAY_WINDOW "delayWindow",
	aat.RELEASE_METHOD "releaseMethod",
	aat.BUSINESS_MODEL "businessModel",
	aat.REBATE_FLAG "rebateFlag",
	aat.CONSIGNED_FROM_SUPPLIER "consignedFromSupplier",
	aat.BILLING_CYCLE "billingCycle",
	aat.VCI_ITEM_TYPE "vciItemType",
	aat.MIDDLE_SUPPLIER_CODE "middleSupplierCode",
	aat.IS_BUBS_FLAG "isBubsFlag",
	aat.SUPPLY_MODE "supplyMode",
	aat.MATERIAL_SOURCE "materialSource",
	aat.ICMS_ST_FLAG "icmsStFlag",
	aat.BASIC_LEAD_TIME "basicLeadTime",
	aat.MATERIAL_SOURCE "materialSource",
	aat.LAST_BILLING_DATE "lastBillingDate",
	aat.CREATION_DATE "attrCreationDate",
	aat.LAST_UPDATE_DATE "attrLastUpdateDate",
	aat.CREATED_BY "createdBy",
	aat.LAST_UPDATED_BY "lastUpdatedBy",
	aast.CLOSURE_TYPE "closureType",
	aast.CLOSURE_REASON "closureReason",
	aast.SOURCE_SYSTEM "sourceSystem" 
FROM
	ASL_APPROVAL_SUPPLIER_T aast,
	ASL_ATTRIBUTE_T aat 
WHERE
	$8 = $9 
	AND aast.ASL_ID = aat.ASL_ID 
	AND EXISTS (
	SELECT
		$10FROM (
		SELECT
			aast.ASL_ID "aslId" 
		FROM
			ASL_APPROVAL_SUPPLIER_T aast 
		WHERE
			aast.LAST_UPDATE_DATE BETWEEN TO_TIMESTAMP( $1,$11 ) 
			AND TO_TIMESTAMP( $2,$12 ) 
			AND NOT EXISTS (
			SELECT
				$13FROM ASL_MQS_T amt 
			WHERE
				amt.ASL_ID = aast.ASL_ID 
				AND amt.CREATION_DATE >= TO_TIMESTAMP( $3,$14 ) 
				AND amt.CREATION_DATE >= aast.LAST_UPDATE_DATE 
			) UNION ALL
		SELECT
			aat.ASL_ID "aslId" 
		FROM
			ASL_ATTRIBUTE_T aat 
		WHERE
			aat.LAST_UPDATE_DATE BETWEEN TO_TIMESTAMP( $4,$15 ) 
			AND TO_TIMESTAMP( $5,$16 ) 
			AND NOT EXISTS (
			SELECT
				$17FROM ASL_MQS_T amt 
			WHERE
				amt.ASL_ID = aat.ASL_ID 
				AND amt.CREATION_DATE >= TO_TIMESTAMP( $6,$18 ) 
				AND amt.CREATION_DATE >= aat.LAST_UPDATE_DATE 
			) 
		) AS adWHERE aast.ASL_ID = ad."aslId" 
	) 
	LIMIT $7
